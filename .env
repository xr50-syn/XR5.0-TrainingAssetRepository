# ===========================================
# .env.sandbox - LocalStack AWS Sandbox Testing
# For partners to test without real AWS costs
# ===========================================

# Environment Type
ASPNETCORE_ENVIRONMENT=Development
STORAGE_TYPE=S3

# Database Configuration
XR50_REPO_DB_NAME=magical_library
XR50_REPO_DB_USER=sandbox_user
XR50_REPO_DB_PASSWORD=sandbox_password

# MinIO S3 Configuration (Sandbox Testing)
# MinIO provides full S3 API compatibility with reliable persistence
# Note: MinIO uses port 9000 for API, 9001 for Web Console
# Web Console: http://localhost:9001 (login: minioadmin/minioadmin)
AWS_HOST=http://minio:9000
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_REGION=eu-west-1

# S3 Settings for MinIO
S3_BASE_BUCKET_PREFIX=xr50-sandbox
S3_FORCE_PATH_STYLE=true

# Public Endpoint (URL returned to clients for file access)
# Use VM IP for partners to access from their laptops
S3_PUBLIC_ENDPOINT=http://192.168.1.6:9000

# MinIO Credentials (for Web Console access)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# IAM/Keycloak Configuration
# For local development with Keycloak container
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
# Authority/Metadata: Internal Docker URL (API container -> Keycloak container)
KEYCLOAK_AUTHORITY=http://keycloak:8080/realms/xr50
KEYCLOAK_METADATA=http://keycloak:8080/realms/xr50/.well-known/openid-configuration
# Issuer: External URL (must match 'iss' claim in tokens obtained from localhost:8180)
KEYCLOAK_ISSUER=http://localhost:8180/realms/xr50
KEYCLOAK_AUDIENCE=xr50-training-api
KEYCLOAK_REQUIRE_HTTPS=false
IAM_ALLOW_ANONYMOUS=true
